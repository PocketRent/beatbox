#!/bin/sh

if [ $# -ne 4 ]; then
	cat <<USAGE
Usage: $0 min-length max-length input output

Creates a PHP file with an array of words between min-length and max-length
letters from the input file, writing it to the output file.

USAGE
exit 1;
fi

date=`date --rfc-3339=date`

cat > $4 <<PREAMBLE
<?php

// GENERATED BY $0 on $date

\$wordlist = [
PREAMBLE

for word in `sed -n "s/^ *\([^ ]\+\) *$/\l\1/;/^[[:alpha:]]\{$1,$2\}$/ P" $3`; do
	echo "	'$word'," >> $4;
done

lines=`wc -l $4 | awk '{print $1-5}'`

cat >> $4 <<END
];
END

echo "\$wordlist_len = $lines;" >> $4

echo "Generated Wordlist with $lines words"
